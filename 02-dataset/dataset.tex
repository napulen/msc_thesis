\chapter{Dataset}
\label{chap:dataset}
The dataset used for this work is a novell dataset created as part of the final output of this work. It consists of 24 musical scores corresponding to six string quartets, Op.20, written by Joseph Haydn. These quartets are commonly known as the \emph{Sun quartets}.

\begin{table}[]
\centering
\begin{tabular}{|l|c|c|c|}
\hline
Number & Movement & Tempo & Musical form \\ \hline
\multicolumn{4}{|l|}{Op.20 No.1} \\ \hline
1 & I & Allegro Moderato & Sonata \\ \hline
2 & II & Minuetto. Allegretto & Minuet \\ \hline
3 & III & Affettuoso e sostenuto & Aria \\ \hline
4 & IV & Finale. Presto & Allegro \\ \hline
\multicolumn{4}{|l|}{Op.20 No.2} \\ \hline
5 & I & Moderato & Sonata \\ \hline
6 & II & Adagio & Aria* \\ \hline
7 & III & Minuetto. Allegretto & Minuet \\ \hline
8 & IV & Fuga a 4 Soggetti & Fuga \\ \hline
\multicolumn{4}{|l|}{Op.20 No.3} \\ \hline
9 & I & Allegro con Spirito & Sonata \\ \hline
10 & II & Minuetto. Allegretto & Minuet \\ \hline
11 & III & Poco Adagio & Aria \\ \hline
12 & IV & Finale. Allegro Molto & Sonata \\ \hline
\multicolumn{4}{|l|}{Op.20 No.4} \\ \hline
13 & I & Allegro di Molto & Sonata \\ \hline
14 & II & Un poco Adagio Affettuoso & Theme and variations \\ \hline
15 & III & Allegretto alla zingarese & Minuet \\ \hline
16 & IV & Presto scherzando & Sonata \\ \hline
\multicolumn{4}{|l|}{Op.20 No.5} \\ \hline
17 & I & Allegro moderato & Sonata \\ \hline
18 & II & Minuetto & Minuet \\ \hline
19 & III & Adagio & Siciliana \\ \hline
20 & IV & Finale: Fuga a due Soggetti & Fuga \\ \hline
\multicolumn{4}{|l|}{Op.20 No.6} \\ \hline
21 & I & Allegro di Molto e Scherzando & Sonata \\ \hline
22 & II & Adagio, Cantabile & Sonata \\ \hline
23 & III & Minuetto. Allegretto & Minuet \\ \hline
24 & IV & Fuga a 3 Soggetti. Allegro & Fuga \\ \hline
\end{tabular}
\caption{The 24 music pieces within Haydn's Op.20}
\label{table:op20}
\end{table}

The comprehensive works included in Op.20 is listed in \autoref{table:op20}, as can be seen, among these 24 pieces there are several sonata, fugues, minuets, theme and variations and aria musical forms. This variety of musical forms was one important reason to create a harmonic analysis dataset out of these string quartets.

The dataset lies in the following repository \url{https://github.com/napulen/haydn_op20_harm}.

\section{String quartet}
String quartets are one of the most prominent genres developed during the Classical period. For composing in this genre, a broad knowledge of harmony is required.

In terms of harmonic analysis, string quartets are interesting as they provide four voices for most of the time, which is the number of voices in which harmony is usually taught and studied. Additionally, in the symbolic representation of the music, it is more likely that each voice will be separated in a different channel (or spine, in the case of humdrum), which is an additional aid to the harmonic analysis algorithms, as melodic seggregation is an important problem seen in these algorithms.

\section{Joseph Haydn}
Joseph Haydn is colloquially named \emph{The father of the string quartet}. He represents a major figure of the classical period of western art music,
exemplifying many of the characteristic features of the style. Also, he was a mentor for two other major figures of the classical period, Wolfgang Amadeus Mozart and Ludwig van Beethoven.

\section{Op.20 String quartets}
The \emph{sun quartets} provided to be representative works of the string quartet genre, while remaining innovative to the compositional technique of string quartets. Among the reasons to use them in this work stands the interesting distribution of musical forms in their movements. As displayed in \autoref{table:op20}, within these string quartets there are sonata form movements, fugues, theme and variations, minuets and arias.

These string quartets also remain less experimental than later works, e.g., Op.33, which makes the task of automatic harmonic analysis suitable, without adding any further complications. Finally, musical resources such as syncopation, modulation, imitation and counterpoint are handled with mastery along these 24 pieces, which introduces different scenarios and test cases for an automatic harmonic analysis algorithm.

\section{Creating the dataset}
\subsection{Extending KernScores content}
In order to create the dataset used in this work, I based in the current symbolic scores that can be found in the \href{http://kern.ccarh.org/}{KernScores} website \cite{kernscores}. This website already hosts 19 out of the 24 humdrum scores comprehending the Op.20 string quartets, so the effort left for having the entire Op.20 is to transcribe the musical pieces shown in \autoref{table:missing-op20} in a similar symbolic representation.

\begin{table}[]
\centering
\begin{tabular}{|l|}
\hline
Missing movement \\ \hline
Op.20 No.1 - III. Affettuoso e sostenuto \\ \hline
Op.20 No.2 - II. Adagio \\ \hline
Op.20 No.3 - I. Allegro con Spirito \\ \hline
Op.20 No.4 - I. Allegro di Molto \\ \hline
Op.20 No.4 - II. Un poco Adagio Affettuoso \\ \hline
\end{tabular}
\caption{Missing scores from Op.20 that are not available in the KernScores website}
\label{table:missing-op20}
\end{table}

\subsection{Manual annotations}
Once the symbolic scores are complete, the next step in the creation of the dataset involves a manual harmonic analysis of each of the pieces. As presented during \autoref{chap:introduction}, the expected output of the system is an annotated version in the form of a roman numeral analysis. Therefore, the manual analyses performed over the 24 pieces of the dataset have been done using these roman numeral analysis labels as well.

The best way to digitally append a roman numeral analysis to these symbolic scores is using the \emph{**harm} \cite{harm} syntax. which can be included as a spine in the humdrum file.

\subsubsection{About the **harm syntax}
The **harm syntax is a dedicated syntax for annotating roman numerals, which is compatible with the Humdrum grammar. Among other things, it allows to represent different diatonic chords, as well as common chromatic substitutions in the common practice, e.g., augmented sixth and neapolitan chords. It also allows to set a current key to relate all the numeral degrees to, define a region as ambiguous in key, add intervals if a chord cannot be expressed with the roman numerals or chromatic substitution tokens.

\autoref{table:manual-annotation} shows an example of appending this manual roman numeral analysis to the same excerpt of music presented since the beginning of this document, i.e., \emph{Joseph Haydn's Op.20 No.3 - II. Menuetto: Allegretto, mm.1-6}.

\begin{table}[]
\centering
\begin{tabular}{|llll|ll|}
\hline
\multicolumn{4}{|l|}{Original humdrum score} & \multicolumn{2}{l|}{Appended analysis} \\ \hline
**kern & **kern & **kern & **kern & **harm & **commentary \\
*k{[}b-e-{]} & *k{[}b-e-{]} & *k{[}b-e-{]} & *k{[}b-e-{]} & *k{[}b-e-{]} & *k{[}b-e-{]} \\
*g: & *g: & *g: & *g: & *g: & *g: \\
*clefF4 & *clefC3 & *clefG2 & *clefG2 & * & * \\
*M3/4 & *M3/4 & *M3/4 & *M3/4 & *M3/4 & *M3/4 \\
2r & 2r & 2r & 2r & . & . \\
4r & 4r & 4r & 4d & . & . \\
1 & 1 & 1 & 1 & 1 & 1 \\
4G & 2.r & 4B- & 4b- & i & . \\
4A & . & 4c & 4a & iio & \begin{tabular}[c]{@{}l@{}}Not really diminished, \\ missing the fifth\end{tabular} \\
4B- & . & 4d & 4g & ib & . \\
2 & 2 & 2 & 2 & 2 & 2 \\
2c & 2r & 2e- & 4g & iv & . \\
. & . & . & 4g & . & . \\
4B- & 4d & 4d & 4g & ib & . \\
3 & 3 & 3 & 3 & 3 & 3 \\
{[}2.A & {[}2.c & {[}2.f\# & 4cc & viiob & . \\
. & . & . & 4cc & . & . \\
. & . & . & 4dd & V7c & . \\
4 & 4 & 4 & 4 & 4 & 4 \\
2.A\_ & 2.c\_ & 2.f\#\_ & 2ee- & viioD7b & . \\
. & . & . & 4ee- & . & . \\
5 & 5 & 5 & 5 & 5 & 5 \\
4A{]} & 4c{]} & 4f\#{]} & 4dd & V7c & . \\
2r & 2r & 2r & 4r & . & . \\
. & . & . & 4d & . & . \\ \hline
\end{tabular}
\caption{Example of appending a manual annotation of roman numerals to a humdrum score}
\label{table:manual-annotation}
\end{table}

This example was taken from the dataset repository and thus this is how the annotations look in the dataset. The first appended spine represents the roman numeral labels, while the second is left for clarifications, exaplanations and any comment that is worth mentioning during certain point of the analysis. The only meaningful difference against the annotations in the dataset is that these have been preppended to the humdrum file instead of appended, as this allowed for easier parsing of the files.


\newpage
